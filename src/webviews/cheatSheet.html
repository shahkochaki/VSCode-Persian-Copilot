<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>چیت شیت‌ها</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- استایل‌های مشترک -->
    <link rel="stylesheet" href="assets/css/common.css" />
    <!-- استایل‌های اختصاصی -->
    <link rel="stylesheet" href="assets/css/cheatSheet.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
          "
        >
          <h1 style="margin: 0">📚 چیت شیت‌ها</h1>
          <button
            id="addCheatSheetBtn"
            class="auth-button primary"
            style="display: none"
            onclick="openCheatSheetModal()"
          >
            ➕ افزودن چیت شیت
          </button>
        </div>
        <p id="headerDescription">
          مجموعه‌ای از چیت شیت‌های مفید برای توسعه‌دهندگان
        </p>

        <!-- Search and Filter Section -->
        <div class="search-filter-section">
          <div class="search-container">
            <input
              type="text"
              id="searchInput"
              placeholder="جستجو در چیت شیت‌ها..."
            />
            <button id="searchBtn">🔍</button>
          </div>
          <div class="filter-container">
            <select id="categoryFilter">
              <option value="">همه دسته‌بندی‌ها</option>
            </select>
            <select id="typeFilter">
              <option value="all">همه چیت شیت‌ها</option>
              <option value="public">عمومی</option>
              <option value="my" id="myFilter" style="display: none">
                چیت شیت‌های من
              </option>
            </select>
          </div>
        </div>
      </div>

      <div id="loadingSection" class="loading">
        <div>در حال بارگذاری چیت شیت‌ها...</div>
      </div>

      <div id="errorSection" class="error" style="display: none">
        <div>❌ خطا در بارگذاری چیت شیت‌ها</div>
        <div id="errorMessage"></div>
        <button class="retry-button" onclick="loadCheatSheets()">
          تلاش مجدد
        </button>
      </div>

      <div id="cheatSheetsSection" style="display: none">
        <div id="cheatSheetsGrid" class="cheat-sheet-grid">
          <!-- Cheat sheets will be populated here -->
        </div>
      </div>

      <div id="cheatSheetDetail" class="cheat-sheet-detail">
        <button class="back-button" onclick="showCheatSheetsList()">
          ← بازگشت به لیست
        </button>
        <div class="detail-header">
          <div id="detailTitle" class="detail-title"></div>
          <div id="detailDescription" class="detail-description"></div>
          <div id="detailOwner" class="detail-owner"></div>
        </div>
        <div id="itemsContainer" class="items-container">
          <!-- Items will be populated here -->
        </div>
      </div>

      <!-- Create/Edit CheatSheet Modal -->
      <div id="cheatSheetModal" class="modal">
        <div class="modal-content" style="max-width: 600px">
          <div class="modal-header">
            <h2 id="cheatSheetModalTitle">ایجاد چیت شیت جدید</h2>
          </div>
          <form id="cheatSheetForm">
            <div class="form-group">
              <label for="cheatSheetTitle">عنوان:</label>
              <input type="text" id="cheatSheetTitle" required />
            </div>
            <div class="form-group">
              <label for="cheatSheetDescription">توضیحات:</label>
              <textarea id="cheatSheetDescription" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label for="cheatSheetCategory">دسته‌بندی:</label>
              <input type="text" id="cheatSheetCategory" />
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="cheatSheetPublic" />
                چیت شیت عمومی باشد
              </label>
            </div>
            <div
              id="cheatSheetError"
              class="error-message"
              style="display: none"
            ></div>
            <div class="modal-actions">
              <button type="submit" class="btn-primary">ذخیره</button>
              <button
                type="button"
                class="btn-secondary"
                onclick="closeModal('cheatSheetModal')"
              >
                انصراف
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Create/Edit Item Modal -->
      <div id="itemModal" class="modal">
        <div class="modal-content" style="max-width: 700px">
          <div class="modal-header">
            <h2 id="itemModalTitle">افزودن آیتم جدید</h2>
          </div>
          <form id="itemForm">
            <div class="form-group">
              <label for="itemTitle">عنوان آیتم:</label>
              <input type="text" id="itemTitle" required />
            </div>
            <div class="form-group">
              <label for="itemContent">توضیحات:</label>
              <textarea id="itemContent" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label for="itemCodeExample">مثال کد:</label>
              <textarea
                id="itemCodeExample"
                rows="6"
                style="
                  font-family: 'Courier New', monospace;
                  direction: ltr;
                  text-align: left;
                "
              ></textarea>
            </div>
            <div class="form-group">
              <label for="itemCategory">دسته‌بندی آیتم:</label>
              <input type="text" id="itemCategory" />
            </div>
            <div class="form-group">
              <label for="itemOrderIndex">ترتیب نمایش:</label>
              <input type="number" id="itemOrderIndex" min="0" step="1" />
            </div>
            <div
              id="itemError"
              class="error-message"
              style="display: none"
            ></div>
            <div class="modal-actions">
              <button type="submit" class="btn-primary">ذخیره</button>
              <button
                type="button"
                class="btn-secondary"
                onclick="closeModal('itemModal')"
              >
                انصراف
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- JavaScript مشترک -->
    <script src="assets/js/common.js"></script>
    <!-- JavaScript اختصاصی -->
    <script src="assets/js/cheatSheet.js"></script>
  </body>
</html>
